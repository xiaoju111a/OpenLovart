# 快速测试指南

## 🚀 立即测试

### 1. 重启开发服务器
```bash
# 按 Ctrl+C 停止当前服务器
npm run dev
```

### 2. 测试上下文工具栏
1. 访问: `http://localhost:3000/lovart/canvas`
2. 点击左侧 "+" 按钮
3. 选择"上传图片"
4. 上传一张图片
5. **点击图片选中它**
6. ✅ **应该在图片上方看到工具栏**

**工具栏应该包含**:
- 📐 尺寸显示 (例如: 300 × 200)
- 🎨 替换背景按钮
- 👕 Mockup 按钮
- ✨ 编辑元素按钮
- ➡️ **流程按钮** (蓝色高亮)
- 🔮 **扩展元素按钮** (紫蓝渐变)
- 📋 复制按钮
- ⬇️ 下载按钮
- 🗑️ 删除按钮

### 3. 测试视频播放
1. 点击左侧 "+" 按钮
2. 选择"上传视频"
3. 上传一个视频文件
4. ✅ **视频应该显示播放控制条**
5. 点击播放按钮测试播放

### 4. 测试流程图
1. 选中一张图片
2. 点击工具栏的 **"流程"** 按钮
3. ✅ 应该创建虚线连接和图像生成器
4. **拖动源图片**
5. ✅ 只有源图片移动，其他元素保持不动
6. 连接线自动更新

### 5. 测试数据库保存
1. 确保右上角显示用户头像（已登录）
2. 添加一些元素
3. 等待 2 秒
4. 查看右上角状态：
   - ✅ "✅ 已保存" = 成功
   - ❌ "离线" = 有问题

**如果显示"离线"**:
1. 打开浏览器控制台 (F12)
2. 查看错误信息
3. 访问 `/debug-auth` 检查认证状态

## 🐛 常见问题

### 问题: 工具栏不显示
**解决方法**:
1. 确保图片被选中（有蓝色边框）
2. 尝试缩放画布（Ctrl + 滚轮）
3. 检查浏览器控制台是否有错误

### 问题: 视频无法播放
**解决方法**:
1. 确保视频格式为 mp4
2. 检查文件大小（建议 < 50MB）
3. 尝试其他视频文件

### 问题: 数据库离线
**解决方法**:
1. 访问 `/debug-auth`
2. 检查所有项是否为 ✅
3. 如果有 ❌，查看 TROUBLESHOOTING.md

### 问题: 拖动时元素乱飞
**已修复**: 现在只移动选中的元素

## 📊 预期结果

### 正常工作流程
1. 上传图片 → 图片显示
2. 点击图片 → 工具栏出现在上方
3. 点击"流程" → 创建虚线连接
4. 拖动图片 → 只有该图片移动
5. 等待 2 秒 → 显示"已保存"
6. 刷新页面 → 所有元素仍在

### 控制台日志（正常）
```
Starting save... { userId: 'user_xxx', projectId: null, elementsCount: 1 }
Save successful!
```

### 控制台日志（异常）
```
Save skipped: No user logged in
// 需要登录

Save skipped: Supabase client not initialized
// 需要检查认证配置

RLS Policy Error: User not authenticated properly
// 需要配置 Clerk JWT 模板
```

## ✅ 所有功能清单

- [x] 图片上传和显示
- [x] 视频上传和播放
- [x] 上下文工具栏显示
- [x] 流程图虚线连接
- [x] 独立元素拖动
- [x] 自动保存到数据库
- [x] 图像生成 API
- [x] 视频播放控制

## 🎯 下一步

如果所有测试通过，你可以：
1. 开始使用画布创作
2. 测试更多功能
3. 报告任何新问题

如果有问题，查看：
- `FIXES_SUMMARY.md` - 详细修复说明
- `TROUBLESHOOTING.md` - 故障排除指南
- `DEBUG_IMAGE_UPLOAD.md` - 上传问题调试
